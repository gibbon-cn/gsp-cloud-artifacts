{"version":3,"sources":["./src/packages/aif-be-creation-rule/aif-be-creation-rule-package.module.js","./src/packages/aif-be-creation-rule/package.ts","./src/packages/aif-be-creation-rule/views/aif-be-creation-rule-designer/aif-be-creation-rule-designer.component.css","./src/packages/aif-be-creation-rule/views/aif-be-creation-rule-designer/aif-be-creation-rule-designer.component.html","./src/packages/aif-be-creation-rule/views/aif-be-creation-rule-designer/aif-be-creation-rule-designer.component.ts","./src/packages/aif-be-creation-rule/views/aif-be-creation-rule-entity.ts","./src/packages/aif-be-creation-rule/views/aif-be-creation-rule.module.ts","./src/packages/aif-be-creation-rule/views/aif-be-creation-rule.service.ts","./src/packages/aif-be-creation-rule/views/index.ts"],"names":[],"mappings":"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","file":"aif-be-creation-rule-package.module.chunk.js","sourcesContent":["var __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __metadata = (this && this.__metadata) || function (k, v) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\r\n};\r\nimport { ComponentFactoryResolver, Injector, NgModule } from '@angular/core';\r\nimport { HttpModule } from '@angular/http';\r\nimport { PackageModule } from '@farris/ide-devkit';\r\nimport { GSPMetadataServiceModule } from '@gsp-lcm/metadata-selector';\r\nimport { AifBeCreationRulePackage } from './package';\r\nimport { AifBeCreationRuleModule } from './views/aif-be-creation-rule.module';\r\nimport { environment } from '../../environments/environment';\r\nvar AifBeCreationRulePackageModule = (function (_super) {\r\n    __extends(AifBeCreationRulePackageModule, _super);\r\n    function AifBeCreationRulePackageModule(cfr, injector) {\r\n        var _this = _super.call(this) || this;\r\n        _this.cfr = cfr;\r\n        _this.injector = injector;\r\n        return _this;\r\n    }\r\n    AifBeCreationRulePackageModule.prototype.initPackage = function (gsp) {\r\n        this.package = new AifBeCreationRulePackage(gsp, this.cfr, this.injector);\r\n    };\r\n    AifBeCreationRulePackageModule = __decorate([\r\n        NgModule({\r\n            imports: [\r\n                HttpModule,\r\n                AifBeCreationRuleModule,\r\n                GSPMetadataServiceModule.forRoot(environment.SERVER_IP)\r\n            ],\r\n            providers: []\r\n        }),\r\n        __metadata(\"design:paramtypes\", [ComponentFactoryResolver, Injector])\r\n    ], AifBeCreationRulePackageModule);\r\n    return AifBeCreationRulePackageModule;\r\n}(PackageModule));\r\nexport { AifBeCreationRulePackageModule };\r\n//# sourceMappingURL=aif-be-creation-rule-package.module.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/packages/aif-be-creation-rule/aif-be-creation-rule-package.module.js\n// module id = ./src/packages/aif-be-creation-rule/aif-be-creation-rule-package.module.js\n// module chunks = aif-be-creation-rule-package.module","import { ComponentFactoryResolver, Injector, Type } from '@angular/core';\r\nimport { GSP, Package } from '@farris/ide-devkit';\r\nimport { AifBeCreationRulePackageView } from './views';\r\nimport { AifBeCreationRuleDesignerComponent } from './views/aif-be-creation-rule-designer/aif-be-creation-rule-designer.component';\r\n\r\nexport class AifBeCreationRulePackage extends Package {\r\n  constructor(\r\n    gsp: GSP,\r\n    private cfr: ComponentFactoryResolver,\r\n    private injector: Injector\r\n  ) {\r\n    super(gsp);\r\n  }\r\n\r\n  activate(state) {\r\n    this.gsp.workspace.addOpener((uri: string) => this.openBeCreationRule(uri));\r\n  }\r\n\r\n  openBeCreationRule(uri) {\r\n    if (uri.endsWith('.aifcr')) {\r\n      const pkgView = new AifBeCreationRulePackageView({}, this.cfr, this.injector);\r\n      const currentElement = pkgView.getElement().instance as AifBeCreationRuleDesignerComponent;\r\n      currentElement.metadataUri = uri;\r\n      // 这里需要处理uri，title应返回元数据名称，\r\n      return {\r\n        getTitle: () => uri.substring(uri.lastIndexOf('/') + 1),\r\n        getElement: () => pkgView.getElement()\r\n      };\r\n    }\r\n  }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/packages/aif-be-creation-rule/package.ts","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \":host {\\r\\n    display: -webkit-box;\\r\\n    display: -ms-flexbox;\\r\\n    display: flex;\\r\\n    -webkit-box-orient: vertical;\\r\\n    -webkit-box-direction: normal;\\r\\n        -ms-flex-direction: column;\\r\\n            flex-direction: column;\\r\\n    -webkit-box-flex: 1;\\r\\n        -ms-flex: 1;\\r\\n            flex: 1;\\r\\n}\\r\\n\\r\\n#bemain .k-content {\\r\\n    padding: 0 !important;\\r\\n    display: -webkit-box;\\r\\n    display: -ms-flexbox;\\r\\n    display: flex;\\r\\n    -webkit-box-orient: vertical;\\r\\n    -webkit-box-direction: normal;\\r\\n        -ms-flex-direction: column;\\r\\n            flex-direction: column;\\r\\n}\\r\\n\\r\\n.calc-rules.createNav {\\r\\n    background: #e8edf2;\\r\\n    height: 40px;\\r\\n}\\r\\n\\r\\n.calc-rules.createNav .stepTitle {\\r\\n    padding: 0px 10px;\\r\\n    color: #666666;\\r\\n    line-height: 40px;\\r\\n    cursor: pointer;\\r\\n    font-size: 0.875rem;\\r\\n}\\r\\n\\r\\n.calc-rules.createNav .stepTitle.active {\\r\\n    color: #FFFFFF;\\r\\n    background-color: #0072c6 !important;\\r\\n}\\r\\n\\r\\n.calc-rules.createNav .stepTitle:not(:first-child).active {\\r\\n    margin-left: -17px;\\r\\n    padding-left: 25px;\\r\\n}\\r\\n\\r\\n.calc-rules.createNav .stepTitle.disable {\\r\\n    color: #cdcdcf;\\r\\n}\\r\\n\\r\\n.calc-rules .triangle_border_right {\\r\\n    width: 0;\\r\\n    height: 0;\\r\\n    border-width: 20px 0 20px 18px;\\r\\n    border-style: solid;\\r\\n    border-color: transparent transparent transparent #cccccc;\\r\\n    position: relative;\\r\\n}\\r\\n\\r\\n.calc-rules .triangle_border_right span {\\r\\n    display: block;\\r\\n    width: 0;\\r\\n    height: 0;\\r\\n    border-width: 20px 0px 20px 18px;\\r\\n    border-style: solid;\\r\\n    border-color: transparent transparent transparent #e8edf2;\\r\\n    position: absolute;\\r\\n    top: -20px;\\r\\n    left: -20px;\\r\\n}\\r\\n\\r\\n.calc-rules .triangle_border_right.active {\\r\\n    width: 0;\\r\\n    height: 0;\\r\\n    border-width: 20px 0 20px 20px;\\r\\n    border-color: transparent transparent transparent #e8edf2;\\r\\n}\\r\\n\\r\\n.calc-rules .triangle_border_right.active span {\\r\\n    border-width: 20px 0 20px 20px;\\r\\n    border-color: transparent transparent transparent #0072c6;\\r\\n}\\r\\n\\r\\n#beFrameObjTab {\\r\\n    position: absolute;\\r\\n    top: 3em;\\r\\n    bottom: 0;\\r\\n    left: 0;\\r\\n    right: 0;\\r\\n}\\r\\n\\r\\n#beFrameBeTab {\\r\\n    position: absolute;\\r\\n    top: 0em;\\r\\n    bottom: 0;\\r\\n    left: 0;\\r\\n    right: 0;\\r\\n}\\r\\n\\r\\n.aifHeader{\\r\\n    background-color:#C0C0C0;\\r\\n}\", \"\"]);\n\n// exports\n\n\n/*** EXPORTS FROM exports-loader ***/\nmodule.exports = module.exports.toString();\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/packages/aif-be-creation-rule/views/aif-be-creation-rule-designer/aif-be-creation-rule-designer.component.css\n// module id = ./src/packages/aif-be-creation-rule/views/aif-be-creation-rule-designer/aif-be-creation-rule-designer.component.css\n// module chunks = aif-be-creation-rule-package.module","module.exports = \"<div class=\\\"d-flex flex-column\\\" style=\\\"flex:1;\\\">\\r\\n  <div class=\\\"border-bottom\\\">\\r\\n    <button kendoButton [look]=\\\"'bare'\\\" (click)=\\\"saveMetadata()\\\">保存</button>\\r\\n    <button kendoButton [look]=\\\"'bare'\\\" (click)=\\\"publishMetadata()\\\">发布</button>\\r\\n    <button kendoButton [look]=\\\"'bare'\\\" (click)=\\\"unPublishMetadata()\\\">撤销发布</button>\\r\\n  </div>\\r\\n\\r\\n  <div>\\r\\n    <h5 class=\\\"float-left aifHeader\\\">生单规则</h5>\\r\\n  </div>\\r\\n\\r\\n  <div class=\\\"flex-auto\\\" style=\\\"overflow-y:auto;\\\" id=\\\"attachmentParent\\\">\\r\\n    <form class=\\\"k-form\\\">\\r\\n      <div class=\\\"row\\\">\\r\\n        <div class=\\\"col-sm-12 col-md-6 pb-1\\\">\\r\\n          <label class=\\\"k-form-field\\\" for=\\\"id\\\">\\r\\n            <span>\\r\\n              ID\\r\\n              <span style=\\\"color:red\\\">*</span>\\r\\n            </span>\\r\\n            <input class=\\\"k-textbox w-100\\\" readonly required placeholder=\\\"\\\" name=\\\"id\\\" [(ngModel)]=\\\"toDesignerBeCreationRule&&toDesignerBeCreationRule.Id\\\"\\r\\n              #ID=\\\"ngModel\\\">\\r\\n            <div [hidden]=\\\"ID.valid || ID.pristine\\\" class=\\\"alert-danger\\\">\\r\\n              \\\"ID\\\"不能为空\\r\\n            </div>\\r\\n          </label>\\r\\n\\r\\n          <label class=\\\"k-form-field \\\" for=\\\"name\\\">\\r\\n            <span>名称</span>\\r\\n            <input class=\\\"k-textbox w-100\\\" placeholder=\\\"\\\" name=\\\"name\\\" [(ngModel)]=\\\"toDesignerBeCreationRule&&toDesignerBeCreationRule.Name\\\">\\r\\n          </label>\\r\\n\\r\\n          <label class=\\\"k-form-field\\\" for=\\\"isEnabled\\\">\\r\\n            <div class=\\\"d-flex mr-5\\\">\\r\\n              <br/>\\r\\n              <input type=\\\"checkbox\\\" id=\\\"isEnabled\\\" class=\\\"k-checkbox\\\" name=\\\"isEnabled\\\" [(ngModel)]=\\\"toDesignerBeCreationRule&&toDesignerBeCreationRule.IsEnabled\\\">\\r\\n              <label class=\\\"k-checkbox-label\\\" for=\\\"isEnabled\\\">是否启用</label>\\r\\n              <br/>\\r\\n            </div>\\r\\n          </label>\\r\\n\\r\\n          <label class=\\\"k-form-field\\\" for=\\\"mappingRuleId\\\">\\r\\n            <span>\\r\\n              映射规则ID\\r\\n              <span style=\\\"color:red\\\">*</span>\\r\\n            </span>\\r\\n            <div class=\\\"d-flex\\\" (mouseenter)=\\\"setClearMappingRuleIdable(true)\\\" (mouseleave)=\\\"setClearMappingRuleIdable(false)\\\">\\r\\n              <span style=\\\"opacity: 1; width: 100%; position: relative;\\\">\\r\\n                <input class=\\\"k-textbox w-100\\\" readonly required placeholder=\\\"\\\" name=\\\"mappingRuleId\\\" [(ngModel)]=\\\"toDesignerBeCreationRule&&toDesignerBeCreationRule.MappingRuleId\\\"\\r\\n                  #MappingRuleId=\\\"ngModel\\\">\\r\\n                <span *ngIf=\\\"clearMappingRuleIdable\\\" style=\\\"position: absolute; right: 4px; top: 2px; color:red;font-weight: bold\\\" (click)=\\\"clearMappingRuleId()\\\">x</span>\\r\\n              </span>\\r\\n\\r\\n              <button class=\\\"k-button k-bare\\\" type=\\\"button\\\" (click)=\\\"selectMetadata('MappingRule')\\\">\\r\\n                <i class=\\\"material-icons align-middle\\\" style=\\\" font-size: 18px;\\\">filter_none</i>\\r\\n              </button>\\r\\n            </div>\\r\\n\\r\\n            <div [hidden]=\\\"MappingRuleId.valid || MappingRuleId.pristine\\\" class=\\\"alert-danger\\\">\\r\\n              \\\"映射规则ID\\\"不能为空\\r\\n            </div>\\r\\n          </label>\\r\\n\\r\\n          <label class=\\\"k-form-field\\\" for=\\\"targetURI\\\">\\r\\n            <span>目标页面地址</span>\\r\\n            <input class=\\\"k-textbox w-100\\\" placeholder=\\\"\\\" name=\\\"targetURI\\\" [(ngModel)]=\\\"toDesignerBeCreationRule&&toDesignerBeCreationRule.TargetURI\\\">\\r\\n          </label>\\r\\n\\r\\n          <label class=\\\"k-form-field\\\" for=\\\"description\\\">\\r\\n            <span>描述</span>\\r\\n            <textarea kendoTextArea class=\\\"form-control\\\" placeholder=\\\"\\\" name=\\\"description\\\" [(ngModel)]=\\\"toDesignerBeCreationRule&&toDesignerBeCreationRule.Description\\\"></textarea>\\r\\n          </label>\\r\\n        </div>\\r\\n\\r\\n        <div class=\\\"col-sm-12 col-md-6 pb-1\\\">\\r\\n          <label class=\\\"k-form-field \\\" for=\\\"sourceBeMetadataID\\\">\\r\\n            <span>\\r\\n              来源BE元数据ID\\r\\n              <span style=\\\"color:red\\\">*</span>\\r\\n            </span>\\r\\n\\r\\n            <div class=\\\"d-flex\\\" (mouseenter)=\\\"setClearSourceBeMetadataIdable(true)\\\" (mouseleave)=\\\"setClearSourceBeMetadataIdable(false)\\\">\\r\\n              <span style=\\\"opacity: 1; width: 100%; position: relative;\\\">\\r\\n                <input class=\\\"k-textbox w-100\\\" readonly required placeholder=\\\"\\\" name=\\\"sourceBeMetadataID\\\" [(ngModel)]=\\\"toDesignerBeCreationRule&&toDesignerBeCreationRule.SourceBeMetadataID\\\"\\r\\n                  #SourceBeMetadataID=\\\"ngModel\\\">\\r\\n                <span *ngIf=\\\"clearSourceBeMetadataIdable\\\" style=\\\"position: absolute; right: 4px; top: 2px; color:red;font-weight: bold\\\" (click)=\\\"clearSourceBeMetadataId()\\\">x</span>\\r\\n              </span>\\r\\n\\r\\n              <button class=\\\"k-button k-bare\\\" type=\\\"button\\\" (click)=\\\"selectMetadata('GSPBusinessEntity',true)\\\">\\r\\n                <i class=\\\"material-icons align-middle\\\" style=\\\" font-size: 18px;\\\">filter_none</i>\\r\\n              </button>\\r\\n            </div>\\r\\n\\r\\n            <div [hidden]=\\\"SourceBeMetadataID.valid || SourceBeMetadataID.pristine\\\" class=\\\"alert-danger\\\">\\r\\n              \\\"来源BE元数据ID\\\"不能为空\\r\\n            </div>\\r\\n          </label>\\r\\n\\r\\n          <label class=\\\"k-form-field\\\" for=\\\"sourceBeType\\\">\\r\\n            <span>\\r\\n              来源BE类型\\r\\n              <span style=\\\"color:red\\\">*</span>\\r\\n            </span>\\r\\n            <input class=\\\"k-textbox w-100\\\" readonly required placeholder=\\\"\\\" name=\\\"sourceBeType\\\" [(ngModel)]=\\\"toDesignerBeCreationRule&&toDesignerBeCreationRule.SourceBeType\\\"\\r\\n              #SourceBeType=\\\"ngModel\\\">\\r\\n            <div [hidden]=\\\"SourceBeType.valid || SourceBeType.pristine\\\" class=\\\"alert-danger\\\">\\r\\n              \\\"来源BE类型\\\"不能为空\\r\\n            </div>\\r\\n          </label>\\r\\n\\r\\n          <label class=\\\"k-form-field\\\" for=\\\"sourceBeName\\\">\\r\\n            <span>\\r\\n              来源BE名称\\r\\n              <span style=\\\"color:red\\\">*</span>\\r\\n            </span>\\r\\n            <input class=\\\"k-textbox w-100\\\" readonly required placeholder=\\\"\\\" name=\\\"sourceBeName\\\" [(ngModel)]=\\\"toDesignerBeCreationRule&&toDesignerBeCreationRule.SourceBeName\\\"\\r\\n              #SourceBeName=\\\"ngModel\\\">\\r\\n            <div [hidden]=\\\"SourceBeName.valid || SourceBeName.pristine\\\" class=\\\"alert-danger\\\">\\r\\n              \\\"来源BE名称\\\"不能为空\\r\\n            </div>\\r\\n          </label>\\r\\n\\r\\n          <label class=\\\"k-form-field\\\" for=\\\"sourceBeMetadataPackageName\\\">\\r\\n            <span>\\r\\n              来源BE元数据包名称\\r\\n              <span style=\\\"color:red\\\">*</span>\\r\\n            </span>\\r\\n            <input class=\\\"k-textbox w-100\\\" readonly required placeholder=\\\"\\\" name=\\\"sourceBeMetadataPackageName\\\" [(ngModel)]=\\\"toDesignerBeCreationRule&&toDesignerBeCreationRule.SourceBeMetadataPackageName\\\"\\r\\n              #SourceBeMetadataPackageName=\\\"ngModel\\\">\\r\\n            <div [hidden]=\\\"SourceBeMetadataPackageName.valid || SourceBeMetadataPackageName.pristine\\\" class=\\\"alert-danger\\\">\\r\\n              \\\"来源BE元数据包名称\\\"不能为空\\r\\n            </div>\\r\\n          </label>\\r\\n\\r\\n          <label class=\\\"k-form-field \\\" for=\\\"targetBeMetadataID\\\">\\r\\n            <span>\\r\\n              目标BE元数据ID\\r\\n              <span style=\\\"color:red\\\">*</span>\\r\\n            </span>\\r\\n\\r\\n            <div class=\\\"d-flex\\\" (mouseenter)=\\\"setClearTargetBeMetadataIdable(true)\\\" (mouseleave)=\\\"setClearTargetBeMetadataIdable(false)\\\">\\r\\n              <span style=\\\"opacity: 1; width: 100%; position: relative;\\\">\\r\\n                <input class=\\\"k-textbox w-100\\\" readonly required placeholder=\\\"\\\" name=\\\"targetBeMetadataID\\\" [(ngModel)]=\\\"toDesignerBeCreationRule&&toDesignerBeCreationRule.TargetBeMetadataID\\\"\\r\\n                  #TargetBeMetadataID=\\\"ngModel\\\">\\r\\n                <span *ngIf=\\\"clearTargetBeMetadataIdable\\\" style=\\\"position: absolute; right: 4px; top: 2px; color:red;font-weight: bold\\\" (click)=\\\"clearTargetBeMetadataId()\\\">x</span>\\r\\n              </span>\\r\\n\\r\\n              <button class=\\\"k-button k-bare\\\" type=\\\"button\\\" (click)=\\\"selectMetadata('GSPBusinessEntity',false)\\\">\\r\\n                <i class=\\\"material-icons align-middle\\\" style=\\\" font-size: 18px;\\\">filter_none</i>\\r\\n              </button>\\r\\n            </div>\\r\\n\\r\\n            <div [hidden]=\\\"TargetBeMetadataID.valid || TargetBeMetadataID.pristine\\\" class=\\\"alert-danger\\\">\\r\\n              \\\"目标BE元数据ID\\\"不能为空\\r\\n            </div>\\r\\n          </label>\\r\\n\\r\\n          <label class=\\\"k-form-field\\\" for=\\\"targetBeType\\\">\\r\\n            <span>\\r\\n              目标BE类型\\r\\n              <span style=\\\"color:red\\\">*</span>\\r\\n            </span>\\r\\n            <input class=\\\"k-textbox w-100\\\" readonly required placeholder=\\\"\\\" name=\\\"targetBeType\\\" [(ngModel)]=\\\"toDesignerBeCreationRule&&toDesignerBeCreationRule.TargetBeType\\\"\\r\\n              #TargetBeType=\\\"ngModel\\\">\\r\\n            <div [hidden]=\\\"TargetBeType.valid || TargetBeType.pristine\\\" class=\\\"alert-danger\\\">\\r\\n              \\\"目标BE类型\\\"不能为空\\r\\n            </div>\\r\\n          </label>\\r\\n\\r\\n          <label class=\\\"k-form-field\\\" for=\\\"targetBeName\\\">\\r\\n            <span>\\r\\n              目标BE名称\\r\\n              <span style=\\\"color:red\\\">*</span>\\r\\n            </span>\\r\\n            <input class=\\\"k-textbox w-100\\\" readonly required placeholder=\\\"\\\" name=\\\"targetBeName\\\" [(ngModel)]=\\\"toDesignerBeCreationRule&&toDesignerBeCreationRule.TargetBeName\\\"\\r\\n              #TargetBeName=\\\"ngModel\\\">\\r\\n            <div [hidden]=\\\"TargetBeName.valid || TargetBeName.pristine\\\" class=\\\"alert-danger\\\">\\r\\n              \\\"目标BE名称\\\"不能为空\\r\\n            </div>\\r\\n          </label>\\r\\n\\r\\n          <label class=\\\"k-form-field\\\" for=\\\"targetBeMetadataPackageName\\\">\\r\\n            <span>\\r\\n              目标BE元数据包名称\\r\\n              <span style=\\\"color:red\\\">*</span>\\r\\n            </span>\\r\\n            <input class=\\\"k-textbox w-100\\\" readonly required placeholder=\\\"\\\" name=\\\"targetBeMetadataPackageName\\\" [(ngModel)]=\\\"toDesignerBeCreationRule&&toDesignerBeCreationRule.TargetBeMetadataPackageName\\\"\\r\\n              #TargetBeMetadataPackageName=\\\"ngModel\\\">\\r\\n            <div [hidden]=\\\"TargetBeMetadataPackageName.valid || TargetBeMetadataPackageName.pristine\\\" class=\\\"alert-danger\\\">\\r\\n              \\\"目标BE元数据包名称\\\"不能为空\\r\\n            </div>\\r\\n          </label>\\r\\n        </div>\\r\\n      </div>\\r\\n    </form>\\r\\n  </div>\\r\\n</div>\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/packages/aif-be-creation-rule/views/aif-be-creation-rule-designer/aif-be-creation-rule-designer.component.html\n// module id = ./src/packages/aif-be-creation-rule/views/aif-be-creation-rule-designer/aif-be-creation-rule-designer.component.html\n// module chunks = aif-be-creation-rule-package.module","import { Component, OnInit, ComponentFactoryResolver, Injector } from '@angular/core';\r\nimport { CacheService } from '@farris/ide-devkit/services';\r\nimport { BsModalService } from '@farris/ui';\r\n//import { GSPBusinessEntity } from '@gsp-bef/gsp-be-metadata';\r\nimport { MetadataDto, GSPMetadataService, SelectMetadataComponent } from '@gsp-lcm/metadata-selector';\r\nimport { AifBeCreationRuleEntity } from '../aif-be-creation-rule-entity';\r\nimport { AifBeCreationRuleService } from '../aif-be-creation-rule.service';\r\n\r\n@Component({\r\n    selector: 'app-aif-be-creation-rule-designer',\r\n    templateUrl: './aif-be-creation-rule-designer.component.html',\r\n    styleUrls: ['./aif-be-creation-rule-designer.component.css'],\r\n    providers: [AifBeCreationRuleService]\r\n})\r\nexport class AifBeCreationRuleDesignerComponent implements OnInit {\r\n    toDesignerBeCreationRule: AifBeCreationRuleEntity;\r\n    metadataDto: MetadataDto;\r\n    title = 'app';\r\n    private _metadataUri: string;\r\n    set metadataUri(metadataUri: string) {\r\n        this._metadataUri = metadataUri;\r\n\r\n        let fullname: string = this._metadataUri.substring(this._metadataUri.lastIndexOf('/') + 1);\r\n        let path: string = this._metadataUri.substring(1, this._metadataUri.lastIndexOf('/'));\r\n        this.lcmService.LoadMetadata(fullname, path).subscribe(data => {\r\n            this.metadataDto = data;\r\n            this.loadMetadata(this.metadataDto);\r\n        }, error => {\r\n            alert(\"加载元数据失败。\")\r\n        });\r\n    }\r\n\r\n    constructor(private lcmService: GSPMetadataService, private cache: CacheService, private beCreationRuleService: AifBeCreationRuleService,\r\n        private modalService: BsModalService, private resolver: ComponentFactoryResolver, private injector: Injector) {\r\n    }\r\n\r\n    ngOnInit() {\r\n    }\r\n\r\n    saveMetadata() {\r\n        this.saveMetadataService().subscribe(() => {\r\n            alert(\"保存成功\");\r\n        }, error => {\r\n            alert(\"保存失败\")\r\n        });\r\n    }\r\n\r\n    saveMetadataService() {\r\n        let beCreationRule: string = JSON.stringify(this.toDesignerBeCreationRule);\r\n        let entity: any = {};\r\n        entity.Entity = beCreationRule;\r\n        this.metadataDto.content = JSON.stringify(entity);\r\n\r\n        return this.lcmService.SaveMetadata(this.metadataDto, this.cache.get(\"sessionId\"));\r\n    }\r\n\r\n    publishMetadata(): void {\r\n        this.saveMetadataService().subscribe(() => {\r\n            this.lcmService.GetProjectInfo(this.metadataDto.relativePath).subscribe(data => {\r\n                this.toDesignerBeCreationRule.MetadataID = this.metadataDto.id;\r\n                this.toDesignerBeCreationRule.MetadataPackageName = data.metadataPackageInfo.name;\r\n                this.lcmService.GetGspProjInfo(data.projectPath).subscribe(data => {\r\n                    this.toDesignerBeCreationRule.SuName = data.serviceUnitCode;\r\n                    this.beCreationRuleService.publishBeCreationRule(this.toDesignerBeCreationRule).subscribe(() => {\r\n                        alert(\"发布成功\");\r\n                    }, error => {\r\n                        let errorString: string = error.error ? error.error.Message : error.statusText;\r\n                        alert(\"发布失败。\\n\" + errorString);\r\n                    });\r\n                })\r\n            })\r\n        });\r\n    }\r\n\r\n    unPublishMetadata(): void {\r\n        this.beCreationRuleService.unPublishBeCreationRule(this.metadataDto.id).subscribe(() => {\r\n            alert(\"撤销发布成功\");\r\n        }, error => {\r\n            let errorString: string = error.error ? error.error.Message : error.statusText;\r\n            alert(\"撤销发布失败。\\n\" + errorString);\r\n        });\r\n    }\r\n\r\n    private loadMetadata(dto: MetadataDto) {\r\n        this.metadataDto = dto;\r\n        if (this.metadataDto.content && this.metadataDto.content != \"\") {\r\n            let entity = JSON.parse(this.metadataDto.content);\r\n            if (entity.Entity != \"null\") {\r\n                this.toDesignerBeCreationRule = JSON.parse(entity.Entity);\r\n            }\r\n            else {\r\n                this.toDesignerBeCreationRule = new AifBeCreationRuleEntity();\r\n            }\r\n\r\n            if (this.toDesignerBeCreationRule.Id == null) {\r\n                this.toDesignerBeCreationRule.Id = this.metadataDto.id;\r\n                this.toDesignerBeCreationRule.IsEnabled = true;\r\n                this.toDesignerBeCreationRule.Name = this.metadataDto.name;\r\n            }\r\n\r\n        }\r\n    }\r\n\r\n    selectMetadata(typeName: string, isSourceBe?: boolean) {\r\n        const compFactory = this.resolver.resolveComponentFactory(SelectMetadataComponent);\r\n        const compRef = compFactory.create(this.injector);\r\n        compRef.instance.metadataPath = this.metadataDto.relativePath;\r\n        compRef.instance.typeName = typeName;\r\n        compRef.instance.selectedMetadata.subscribe($event => {\r\n            if (typeName == 'MappingRule') {\r\n                this.toDesignerBeCreationRule.MappingRuleId = JSON.parse($event.metadata.content).ID;\r\n            }\r\n            else if (typeName == 'GSPBusinessEntity' && isSourceBe == true) {\r\n                this.toDesignerBeCreationRule.SourceBeMetadataID = $event.metadata.id;\r\n                this.toDesignerBeCreationRule.SourceBeType = $event.metadata.code;\r\n                this.toDesignerBeCreationRule.SourceBeMetadataPackageName = $event.packageHeader.name;\r\n                let businessEntity = JSON.parse($event.metadata.content);\r\n                this.toDesignerBeCreationRule.SourceBeName = businessEntity.MainObject.Name;\r\n            }\r\n            else if (typeName == 'GSPBusinessEntity' && isSourceBe == false) {\r\n                this.toDesignerBeCreationRule.TargetBeMetadataID = $event.metadata.id;\r\n                this.toDesignerBeCreationRule.TargetBeType = $event.metadata.code;\r\n                this.toDesignerBeCreationRule.TargetBeMetadataPackageName = $event.packageHeader.name;\r\n                let businessEntity = JSON.parse($event.metadata.content);\r\n                this.toDesignerBeCreationRule.TargetBeName = businessEntity.MainObject.Name;\r\n            }\r\n        });\r\n        const modalConfig = {\r\n            title: '元数据选择',\r\n            width: 882,\r\n            height: 573,\r\n            showButtons: false\r\n        };\r\n        const dialog = this.modalService.show(compRef, modalConfig);\r\n\r\n        compRef.instance.closeModalEmitter.subscribe($event => {\r\n            dialog.close();\r\n        });\r\n    }\r\n\r\n    clearMappingRuleId() {\r\n        this.toDesignerBeCreationRule.MappingRuleId = null;\r\n    }\r\n\r\n    clearSourceBeMetadataId() {\r\n        this.toDesignerBeCreationRule.SourceBeMetadataID = null;\r\n        this.toDesignerBeCreationRule.SourceBeType = null;\r\n        this.toDesignerBeCreationRule.SourceBeName = null;\r\n        this.toDesignerBeCreationRule.SourceBeMetadataPackageName = null;\r\n    }\r\n\r\n    clearTargetBeMetadataId() {\r\n        this.toDesignerBeCreationRule.TargetBeMetadataID = null;\r\n        this.toDesignerBeCreationRule.TargetBeType = null;\r\n        this.toDesignerBeCreationRule.TargetBeName = null;\r\n        this.toDesignerBeCreationRule.TargetBeMetadataPackageName = null;\r\n    }\r\n\r\n    clearMappingRuleIdable: boolean = false;\r\n    setClearMappingRuleIdable(display: boolean) {\r\n        if (this.toDesignerBeCreationRule.MappingRuleId != null) {\r\n            this.clearMappingRuleIdable = display;\r\n        }\r\n        else {\r\n            this.clearMappingRuleIdable = false;\r\n        }\r\n    }\r\n\r\n    clearSourceBeMetadataIdable: boolean = false;\r\n    setClearSourceBeMetadataIdable(display: boolean) {\r\n        if (this.toDesignerBeCreationRule.SourceBeMetadataID != null) {\r\n            this.clearSourceBeMetadataIdable = display;\r\n        }\r\n        else {\r\n            this.clearSourceBeMetadataIdable = false;\r\n        }\r\n    }\r\n\r\n    clearTargetBeMetadataIdable: boolean = false;\r\n    setClearTargetBeMetadataIdable(display: boolean) {\r\n        if (this.toDesignerBeCreationRule.TargetBeMetadataID != null) {\r\n            this.clearTargetBeMetadataIdable = display;\r\n        }\r\n        else {\r\n            this.clearTargetBeMetadataIdable = false;\r\n        }\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/packages/aif-be-creation-rule/views/aif-be-creation-rule-designer/aif-be-creation-rule-designer.component.ts","export class AifBeCreationRuleEntity {\r\n    Id: string;\r\n\r\n    Name: string;\r\n\r\n    Description: string;\r\n    \r\n    MetadataPackageName: string;\r\n\r\n    MetadataID: string;\r\n\r\n    SuName: string;\r\n\r\n    IsEnabled:boolean;\r\n\r\n    SourceBeMetadataPackageName: string;\r\n\r\n    SourceBeMetadataID: string;\r\n\r\n    SourceBeType: string;\r\n\r\n    SourceBeName: string;\r\n\r\n    TargetBeMetadataPackageName: string;\r\n\r\n    TargetBeMetadataID: string;\r\n\r\n    TargetBeType: string;\r\n\r\n    TargetBeName: string;\r\n\r\n    MappingRuleId: string;\r\n\r\n    TargetURI: string;\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/packages/aif-be-creation-rule/views/aif-be-creation-rule-entity.ts","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { HttpClientModule } from '@angular/common/http';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { GridModule } from '@progress/kendo-angular-grid';\r\nimport { ButtonsModule } from '@progress/kendo-angular-buttons';\r\nimport { WindowModule, DialogModule } from '@progress/kendo-angular-dialog';\r\nimport { DropDownsModule } from '@progress/kendo-angular-dropdowns';\r\nimport { GSPHttpModule } from '@farris/ide-devkit/services';\r\nimport { FarrisDialogModule } from '@farris/ui';\r\nimport { MetadataSelectModule } from '@gsp-lcm/metadata-selector';\r\nimport { AifBeCreationRuleDesignerComponent } from './aif-be-creation-rule-designer/aif-be-creation-rule-designer.component';\r\n\r\n@NgModule({\r\n    imports: [\r\n        CommonModule,\r\n        HttpClientModule,\r\n        FormsModule,\r\n        ReactiveFormsModule,\r\n        GridModule,\r\n        ButtonsModule,\r\n        WindowModule,\r\n        DialogModule,\r\n        DropDownsModule,\r\n        GSPHttpModule,\r\n        FarrisDialogModule,\r\n        MetadataSelectModule\r\n    ],\r\n    declarations: [AifBeCreationRuleDesignerComponent],\r\n    entryComponents: [AifBeCreationRuleDesignerComponent]\r\n})\r\nexport class AifBeCreationRuleModule {\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/packages/aif-be-creation-rule/views/aif-be-creation-rule.module.ts","import { Injectable } from '@angular/core';\r\nimport { Observable } from 'rxjs/observable';\r\nimport { HttpService } from '@farris/ide-devkit/services';\r\n\r\n@Injectable()\r\nexport class AifBeCreationRuleService {\r\n  private baseUrl = '/api/dev/sys/v1.0/BeCreationRuleEntities';\r\n\r\n  constructor(private http: HttpService, ) { }\r\n\r\n  publishBeCreationRule(item: any): Observable<any> {\r\n    return this.http.post(this.baseUrl, item);\r\n  }\r\n\r\n  unPublishBeCreationRule(metadataId: string): Observable<any> {\r\n    let param: any = {\r\n      \"parameters\": metadataId\r\n    }\r\n\r\n    const url = ` ${this.baseUrl}/UnPublishBeCreationRule`;\r\n    return this.http.post(url, param);\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/packages/aif-be-creation-rule/views/aif-be-creation-rule.service.ts","import { ComponentFactoryResolver, Injector } from '@angular/core';\r\nimport { PackageView } from '@farris/ide-devkit';\r\nimport { AifBeCreationRuleDesignerComponent } from './aif-be-creation-rule-designer/aif-be-creation-rule-designer.component';\r\n\r\nexport class AifBeCreationRulePackageView extends PackageView {\r\n\r\n  constructor(serializedState: any,\r\n    private cfr: ComponentFactoryResolver,\r\n    private injector: Injector) {\r\n    super(serializedState);\r\n    const componentFactory = this.cfr.resolveComponentFactory(AifBeCreationRuleDesignerComponent);\r\n    this.element = componentFactory.create(this.injector);\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/packages/aif-be-creation-rule/views/index.ts"],"sourceRoot":"webpack:///"}