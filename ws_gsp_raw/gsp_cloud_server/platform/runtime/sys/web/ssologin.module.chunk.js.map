{"version":3,"sources":["./src/app/ssologin/component/ssologin/ssologin.component.css","./src/app/ssologin/component/ssologin/ssologin.component.html","./src/app/ssologin/component/ssologin/ssologin.component.ts","./src/app/ssologin/ssologin.module.ts","./src/app/ssologin/ssoroute.module.ts"],"names":[],"mappings":"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","file":"ssologin.module.chunk.js","sourcesContent":["module.exports = \"\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/ssologin/component/ssologin/ssologin.component.css\n// module id = ./src/app/ssologin/component/ssologin/ssologin.component.css\n// module chunks = ssologin.module","module.exports = \"<p>\\r\\n  正在登录请稍后......\\r\\n</p>\\r\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/ssologin/component/ssologin/ssologin.component.html\n// module id = ./src/app/ssologin/component/ssologin/ssologin.component.html\n// module chunks = ssologin.module","import { Component, OnInit } from '@angular/core';\r\nimport { CacheService } from '../../../../app/rtf-common';\r\nimport { AuthService } from '../../../services/authservice/auth.service';\r\nimport { Router, ParamMap, ActivatedRoute } from '@angular/router';\r\n\r\n@Component({\r\n  selector: 'app-ssologin',\r\n  templateUrl: './ssologin.component.html',\r\n  styleUrls: ['./ssologin.component.css']\r\n})\r\nexport class SsologinComponent implements OnInit {\r\n\r\n  constructor(private auth: AuthService, private router: Router, private cache: CacheService, private route: ActivatedRoute) { }\r\n\r\n  token: any;\r\n  // para ={'userName': 'liyongtr','language': '简体中文','Tenant':'浪潮集团'};\r\n\r\n  ngOnInit() {\r\n\r\n    this.route.paramMap.subscribe((params: ParamMap) => {\r\n      if (params.has('id')) {\r\n        this.token = params.get('id');\r\n        const tokenObj = JSON.parse(this.token);\r\n        this.cache.set('session', tokenObj['sessionId'] );\r\n        this.cache.set('languageCode', tokenObj['lanCode']); // todo:语言先临时写死\r\n        console.log(`languageCode = ${this.cache.get('languageCode')}`);\r\n        this.auth.LoginWithToken().subscribe(\r\n          value => {\r\n                this.cache.remove('currentAppID');\r\n                this.cache.remove('activeItemID');\r\n                this.cache.remove('activatedItemID');\r\n                return this.router.navigate(['/main/home']);\r\n          },\r\n          error => {\r\n                this.router.navigate(['/login']);\r\n          });\r\n      } else {\r\n        this.router.navigate(['/login']);\r\n      }\r\n    });\r\n\r\n    // this.auth.Login(this.para).subscribe(\r\n    //   value => {\r\n    //     this.cache.remove('currentAppID');\r\n    //     this.cache.remove('activeItemID');\r\n    //     this.cache.remove('activatedItemID');\r\n    //     return this.router.navigate(['/main']);\r\n    //   },\r\n    //   error => {\r\n    //     this.router.navigate(['/login']);\r\n    //   });\r\n    // this.route.paramMap.subscribe((params: ParamMap) => {\r\n    //   if (params.has('id')) {\r\n    //     this.token = params.get('id');\r\n    //     var tokenObj = JSON.parse(this.token);\r\n    //     this.cache.set('languageCode',tokenObj[\"Language\"]);\r\n    //     console.log(`languageCode = ${this.cache.get('languageCode')}`);\r\n    //     debugger;\r\n    //     this.auth.LoginWithToken(this.token).subscribe(\r\n    //       value => {\r\n    //       this.cache.remove('currentAppID');\r\n    //       this.cache.remove('activeItemID');\r\n    //       this.cache.remove('activatedItemID');\r\n    //       return this.router.navigate(['/main']);\r\n    //     });\r\n    //   }\r\n    //   else{\r\n    //     this.router.navigate(['/login']);\r\n    //   }\r\n    // });\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/ssologin/component/ssologin/ssologin.component.ts","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { SsologinComponent } from '../ssologin/component/ssologin/ssologin.component';\r\nimport { SsorouteModule } from './ssoroute.module';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    SsorouteModule\r\n  ],\r\n  declarations: [SsologinComponent]\r\n})\r\nexport class SsologinModule { }\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/ssologin/ssologin.module.ts","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\nimport { SsologinComponent } from './component/ssologin/ssologin.component';\r\n\r\nconst routes: Routes = [\r\n  { path: 'token/:id', component: SsologinComponent},\r\n  { path: '', component: SsologinComponent},\r\n];\r\n\r\n\r\n@NgModule({\r\n  imports: [\r\n    RouterModule.forChild(routes)\r\n  ],\r\n  exports: [\r\n    RouterModule\r\n  ]\r\n})\r\nexport class SsorouteModule { }\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/ssologin/ssoroute.module.ts"],"sourceRoot":"webpack:///"}