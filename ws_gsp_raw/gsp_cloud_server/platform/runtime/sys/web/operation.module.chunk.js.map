{"version":3,"sources":["./src/app/modules/common/entity/result-package.ts","./src/app/modules/common/index.ts","./src/app/modules/common/util/sys-manager-util.ts","./src/app/modules/operation/business/app/bizobject-bindingdata.ts","./src/app/modules/operation/business/app/bizobject-form.ts","./src/app/modules/operation/business/app/bizobject-statemachine.ts","./src/app/modules/operation/business/app/bizobject-uistate.ts","./src/app/modules/operation/business/app/bizobject-viewmodel.ts","./src/app/modules/operation/business/app/handler/form-load.handler.ts","./src/app/modules/operation/business/app/handler/index.ts","./src/app/modules/operation/business/app/index.ts","./src/app/modules/operation/business/bizobject.component.css","./src/app/modules/operation/business/bizobject.component.html","./src/app/modules/operation/business/bizobject.component.ts","./src/app/modules/operation/business/bizobject.module.ts","./src/app/modules/operation/business/domain/bizobject-datastorage.ts","./src/app/modules/operation/business/domain/bizobject-repository.ts","./src/app/modules/operation/business/domain/bizobject.service.ts","./src/app/modules/operation/business/domain/entities/bizobject.entity.ts","./src/app/modules/operation/business/domain/index.ts","./src/app/modules/operation/operation-tree/app/index.ts","./src/app/modules/operation/operation-tree/app/operation-tree-bingdata.ts","./src/app/modules/operation/operation-tree/app/operation-tree-viewmodel.ts","./src/app/modules/operation/operation-tree/app/operation-tree.uistate.ts","./src/app/modules/operation/operation-tree/domain/index.ts","./src/app/modules/operation/operation-tree/domain/operation-tree-datastorage.ts","./src/app/modules/operation/operation-tree/domain/operation-tree-repository.ts","./src/app/modules/operation/operation-tree/domain/operation.entity.ts","./src/app/modules/operation/operation-tree/domain/operation.service.ts","./src/app/modules/operation/operation-tree/operation-detail/app/index.ts","./src/app/modules/operation/operation-tree/operation-detail/app/operation-detail-bingdata.ts","./src/app/modules/operation/operation-tree/operation-detail/app/operation-detail-viewmodel.ts","./src/app/modules/operation/operation-tree/operation-detail/app/operation-detail.form.ts","./src/app/modules/operation/operation-tree/operation-detail/domain/index.ts","./src/app/modules/operation/operation-tree/operation-detail/domain/operation-detail-datastorage.ts","./src/app/modules/operation/operation-tree/operation-detail/domain/operation-detail-repository.ts","./src/app/modules/operation/operation-tree/operation-detail/domain/operation-detail.entity.ts","./src/app/modules/operation/operation-tree/operation-detail/operation-datail.component.ts","./src/app/modules/operation/operation-tree/operation-detail/operation-detail.component.css","./src/app/modules/operation/operation-tree/operation-detail/operation-detail.component.html","./src/app/modules/operation/operation-tree/operation-tree.component.css","./src/app/modules/operation/operation-tree/operation-tree.component.html","./src/app/modules/operation/operation-tree/operation-tree.component.ts","./src/app/modules/operation/operation.component.css","./src/app/modules/operation/operation.component.html","./src/app/modules/operation/operation.component.ts","./src/app/modules/operation/operation.module.js","./src/app/modules/operation/operation.router.module.ts"],"names":[],"mappings":"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","file":"operation.module.chunk.js","sourcesContent":["import { Injectable } from '@angular/core';\r\n\r\n@Injectable()\r\n/**二元关系实体增量包 */\r\nexport class ResultPackage {\r\n\r\n    constructor () {\r\n        this.removingResults = new Array<string>();\r\n        this.addingResults = new Array<string>();\r\n    }\r\n    /**主体内码 */\r\n    ownerId: string;\r\n    /**授权的客体删除列表 */\r\n    removingResults: Array<string>;\r\n    /**授权的客体增加列表 */\r\n    addingResults: Array<string>;\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/modules/common/entity/result-package.ts","\r\nimport { SysManagerUtil } from './util/sys-manager-util';\r\n// import { GSPPositionEntity } from './entity/gspposition.entity';\r\nimport { ResultPackage } from './entity/result-package';\r\n\r\n\r\nexport {\r\n    // SysCommonModule,\r\n    SysManagerUtil,\r\n    // GSPPositionEntity,\r\n    ResultPackage\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/modules/common/index.ts","import { Injectable } from '@angular/core';\r\nimport { HttpHeaders } from '@angular/common/http';\r\nimport { CacheService } from '@gsp-sys/rtf-common';\r\n\r\n/**\r\n * 系统管理相关session、webapi等公用方法\r\n */\r\n@Injectable()\r\nexport class SysManagerUtil {\r\n\r\n    /** 暂时传递给认证组件用的 */\r\n    curUserId: string;\r\n    isView = false;\r\n\r\n    /**用户webapi */\r\n    public readonly userWebApi: string;\r\n    /**用户岗位关系webapi */\r\n    public readonly userPositionWebApi: string;\r\n    /**系统组织webapi */\r\n    public readonly sysOrgWebApi: string;\r\n    /**岗位webapi */\r\n    public readonly positionWebApi: string;\r\n    /**功能组webapi */\r\n    public readonly roleWebApi: string;\r\n    /**功能组和岗位关系webapi */\r\n    public readonly positionRoleWebApi: string;\r\n    /**功能操作webapi */\r\n    public readonly operationWebApi: string;\r\n\r\n    constructor (\r\n        private sessionCache: CacheService\r\n    ) {\r\n        const apiPath = '/api/runtime/sys/v1.0';\r\n        this.userWebApi = apiPath + '/users';\r\n        this.userPositionWebApi = apiPath + '/user-position';\r\n        this.sysOrgWebApi = apiPath + '/sysOrgs';\r\n        this.positionWebApi = apiPath + '/positions';\r\n        this.roleWebApi = apiPath + '/roles';\r\n        this.positionRoleWebApi = apiPath + '/position-role';\r\n        this.operationWebApi = apiPath + '/funcOperations';\r\n    }\r\n    /**当前用户的sessionId，从缓存里取的 */\r\n    private sessionId: string;\r\n    /** 当前功能的funcId,框架打开功能时路由过来的参数*/\r\n    public funcId: string;\r\n\r\n    /**\r\n     * 获取用户维护当前模块的路由地址\r\n     */\r\n    getUserManageRouter (): string {\r\n        // user-manager是在数据库里配置的\r\n        const frameWorkUrl = '/main/user-manager/' + this.funcId + '/users';\r\n        return frameWorkUrl;\r\n    }\r\n\r\n    /**\r\n     * 获取岗位维护当前模块的路由地址\r\n     */\r\n    getPositionManagerRouter (): string {\r\n        // user-manager是在数据库里配置的\r\n        const frameWorkUrl = '/main/position-manager/' + this.funcId + '/positions';\r\n        return frameWorkUrl;\r\n    }\r\n\r\n    getRoleManagerRouter (): string {\r\n        const frameWorkUrl = '/main/role-manager/' + this.funcId + '/';\r\n        return frameWorkUrl;\r\n    }\r\n    /**\r\n     * 构造Header\r\n     */\r\n    getHeader () {\r\n        this.sessionId = this.getSessionId();\r\n        const headers = new HttpHeaders().set('SessionId', this.sessionId);\r\n        // 此处key必须是headers\r\n        return { headers };\r\n    }\r\n\r\n    /**\r\n     * 获取当前用户的sessionId\r\n     */\r\n    getSessionId (): string {\r\n        return this.sessionCache.get('session');\r\n    }\r\n\r\n    /**Guid生成 */\r\n    getGuid36 (): string {\r\n        function S4 () {\r\n            // tslint:disable-next-line:no-bitwise\r\n            return (((1 + Math.random()) * 0x10000) | 0).toString(16).substring(1);\r\n        }\r\n        return (S4() + S4() + '-' + S4() + '-' + S4() + '-' + S4() + '-' + S4() + S4() + S4());\r\n    }\r\n}\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/modules/common/util/sys-manager-util.ts","import { Injectable, Injector } from '@angular/core';\r\nimport { NgBindingData, BindingData } from '@farris/devkit';\r\nimport { BizobjectEntity, BizobjectRepository } from '../domain';\r\n\r\n\r\n@Injectable()\r\n@NgBindingData({\r\n  entity:     BizobjectEntity,\r\n  repository: BizobjectRepository\r\n})\r\nclass BizobjectBindingdata extends BindingData {\r\n  constructor(injector: Injector) {\r\n    super(injector);\r\n  }\r\n}\r\n\r\nexport { BizobjectBindingdata };\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/modules/operation/business/app/bizobject-bindingdata.ts","import { Injectable, Injector } from '@angular/core';\r\nimport { FormControl } from '@angular/forms';\r\nimport { NgForm, Form, NgFormControl, NgChildForm, NgChildFormArray } from '@farris/devkit';\r\nimport { BizobjectBindingdata } from './bizobject-bindingdata';\r\n\r\n\r\n \r\n@Injectable()\r\n@NgForm({\r\n  bindingData: BizobjectBindingdata\r\n})\r\nclass BizobjectForm extends Form {\r\n\r\n  constructor(injector: Injector) {\r\n    super(injector);\r\n  }\r\n\r\n  /**\r\n   * id\r\n   */\r\n  @NgFormControl({\r\n    name: 'id',\r\n    binding: 'id'\r\n  })\r\n  id: FormControl;\r\n\r\n  /**\r\n   * code\r\n   */\r\n  @NgFormControl({\r\n    name: 'code',\r\n    binding: 'code'\r\n  })\r\n  code: FormControl;\r\n\r\n}\r\n\r\n\r\nexport {BizobjectForm };\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/modules/operation/business/app/bizobject-form.ts","import { Injectable } from '@angular/core';\r\nimport { StateMachine, NgStatemachine, State, NgState, RenderState,  NgRenderState, Action, NgAction } from '@farris/devkit';\r\n\r\n@Injectable()\r\n@NgStatemachine()\r\nclass BizobjectStatemachine extends StateMachine {\r\n\r\n  /**\r\n   * --------------------------------------------------------------------------------\r\n   * 基本状态定义\r\n   * --------------------------------------------------------------------------------\r\n   */\r\n\r\n  /**\r\n   * 查看状态\r\n   */\r\n  @NgState({ initialState: true })\r\n  viewState: State;\r\n\r\n  /**\r\n   * 新增状态\r\n   */\r\n  @NgState()\r\n  addState: State;\r\n\r\n  /**\r\n   * 编辑状态\r\n   */\r\n  @NgState()\r\n  editState: State;\r\n\r\n\r\n  /**\r\n   * --------------------------------------------------------------------------------\r\n   * 渲染状态定义\r\n   * --------------------------------------------------------------------------------\r\n   */\r\n\r\n  /**\r\n   * 新增按钮是否允许点击\r\n   */\r\n  @NgRenderState({\r\n    render: (context) => context.state === 'viewState'\r\n  })\r\n  canAdd: RenderState;\r\n\r\n  /**\r\n   * 编辑按钮是否允许点击\r\n   */\r\n  @NgRenderState({\r\n    render: (context) => context.state === 'viewState'\r\n  })\r\n  canEdit: RenderState;\r\n\r\n\r\n  /**\r\n   * 取消按钮是否允许点击\r\n   */\r\n  @NgRenderState({\r\n    render: (context) => context.state === 'addState' || context.state === 'editState'\r\n  })\r\n  canCancel: RenderState;\r\n\r\n\r\n  /**\r\n   * 删除\r\n   */\r\n  @NgRenderState({\r\n    render: (context) => context.state === 'viewState'\r\n  })\r\n  canDelete: RenderState;\r\n\r\n  /**\r\n   * 保存按钮是否允许点击\r\n   */\r\n  @NgRenderState({\r\n    render: (context) => context.state === 'addState' || context.state === 'editState'\r\n  })\r\n  canSave: RenderState;\r\n\r\n  /**\r\n   * 上一条、下一条是否允许点击\r\n   */\r\n  @NgRenderState({\r\n    render: (context) => context.state === 'viewState'\r\n  })\r\n  canSwitch: RenderState;\r\n\r\n  /**\r\n   * 输入控件是否允许输入\r\n   */\r\n  @NgRenderState({\r\n    render: (context) => context.state === 'addState' || context.state === 'editState'\r\n  })\r\n  canInput: RenderState;\r\n\r\n\r\n  /**\r\n   * --------------------------------------------------------------------------------\r\n   * 迁移动作定义\r\n   * --------------------------------------------------------------------------------\r\n   */\r\n  @NgAction({transitTo: 'addState' })\r\n  add: Action;\r\n\r\n  @NgAction({ transitTo: 'editState' })\r\n  edit: Action;\r\n\r\n  @NgAction({ transitTo: 'viewState' })\r\n  view: Action;\r\n}\r\n\r\nexport { BizobjectStatemachine };\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/modules/operation/business/app/bizobject-statemachine.ts","class BizobjectUistate {\r\n\r\n    // 上个状态\r\n    action: string;\r\n}\r\nexport { BizobjectUistate };\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/modules/operation/business/app/bizobject-uistate.ts","import { Injector, Injectable } from '@angular/core';\r\nimport { NgViewModel, ViewModel, NgCommand } from '@farris/devkit';\r\n\r\nimport { BizobjectUistate } from './bizobject-uistate';\r\nimport { BizobjectBindingdata } from './bizobject-bindingdata';\r\nimport { BizobjectForm, } from './bizobject-form';\r\nimport { BizobjectStatemachine } from './bizobject-statemachine';\r\n\r\n\r\n\r\n/**\r\n * 视图模型\r\n */\r\n@Injectable()\r\n@NgViewModel({\r\n  children: [],\r\n  binding: BizobjectBindingdata,\r\n  form: BizobjectForm,\r\n  stateMachine: BizobjectStatemachine,\r\n})\r\nclass BizobjectViewmodel extends ViewModel {\r\n\r\n  public uiState: BizobjectUistate;\r\n\r\n  /**\r\n   * 构造函数\r\n   */\r\n  constructor(injector: Injector) {\r\n    super(injector);\r\n    this.uiState = this.injector.get(BizobjectUistate);\r\n  }\r\n\r\n  /**\r\n   * 表单加载\r\n   */\r\n  @NgCommand({\r\n    name: 'formLoad'\r\n  })\r\n  public formLoad() { }\r\n\r\n\r\n\r\n  /**\r\n  * 新增\r\n  */\r\n  @NgCommand({\r\n    name: 'add'\r\n  })\r\n  public add() { }\r\n\r\n\r\n  /**\r\n   * 编辑\r\n   */\r\n  @NgCommand({\r\n    name: 'edit'\r\n  })\r\n  public edit() { }\r\n\r\n\r\n  /**\r\n   * 删除\r\n   */\r\n  @NgCommand({\r\n    name: 'remove'\r\n  })\r\n  public remove() { }\r\n\r\n  /**\r\n   * 保存\r\n   */\r\n  @NgCommand({\r\n    name: 'save'\r\n  })\r\n  public save() { }\r\n\r\n  /**\r\n   * 取消\r\n   */\r\n  @NgCommand({\r\n    name: 'cancel'\r\n  })\r\n  public cancel() { }\r\n\r\n\r\n}\r\n\r\nexport { BizobjectViewmodel };\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/modules/operation/business/app/bizobject-viewmodel.ts","import { Injectable } from '@angular/core';\r\nimport { CommandHandler, NgCommandHandler, TaskExecutionContext } from '@farris/devkit';\r\nimport { BizobjectService } from '../../domain';\r\nimport { BizobjectUistate, } from '../bizobject-uistate';\r\nimport { BizobjectStatemachine } from '../bizobject-statemachine';\r\n\r\n\r\n@Injectable()\r\n@NgCommandHandler({\r\n  commandName: 'formLoad'\r\n})\r\nclass FormLoadHandler extends CommandHandler {\r\n\r\n  constructor(\r\n    private dataService: BizobjectService,\r\n    private uiState: BizobjectUistate,\r\n    private stateMachine: BizobjectStatemachine\r\n  ) {\r\n    super();\r\n  }\r\n\r\n  schedule() {\r\n\r\n    // 数据加载\r\n    this.addTask('loadData', () => {\r\n        this.uiState.action = 'load';\r\n        this.dataService.getdata();\r\n    });\r\n  }\r\n}\r\n\r\nexport { FormLoadHandler };\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/modules/operation/business/app/handler/form-load.handler.ts","import { FormLoadHandler } from \"./form-load.handler\";\r\n\r\n\r\nconst commandHandlers = [\r\n  FormLoadHandler,\r\n];\r\n\r\nexport { commandHandlers };\n\n\n// WEBPACK FOOTER //\n// ./src/app/modules/operation/business/app/handler/index.ts","import { Provider } from '@angular/core';\r\nimport { BizobjectBindingdata } from './bizobject-bindingdata';\r\nimport { BizobjectForm } from './bizobject-form';\r\nimport { BizobjectStatemachine } from './bizobject-statemachine';\r\nimport { BizobjectViewmodel } from './bizobject-viewmodel';\r\nimport { BizobjectUistate } from './bizobject-uistate';\r\nimport { commandHandlers } from './handler';\r\n\r\n\r\n\r\nconst APP_PROVIDERS: Provider[] = [\r\n    BizobjectBindingdata,\r\n    BizobjectForm,\r\n    BizobjectStatemachine,\r\n    BizobjectViewmodel,\r\n    BizobjectUistate\r\n];\r\n\r\nexport {\r\n    BizobjectBindingdata,\r\n    BizobjectForm,\r\n    BizobjectStatemachine,\r\n    BizobjectViewmodel,\r\n    BizobjectUistate,\r\n\r\n    APP_PROVIDERS,\r\n    commandHandlers\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/modules/operation/business/app/index.ts","module.exports = \"\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/modules/operation/business/bizobject.component.css\n// module id = ./src/app/modules/operation/business/bizobject.component.css\n// module chunks = operation.module","module.exports = \"<div class=\\\"pt-2 pl-2\\\">\\r\\n  <h2 class=\\\"h4 d-inline-block\\\">业务对象导航</h2>\\r\\n  <div class=\\\"card\\\">\\r\\n    <kendo-treeview [nodes]=\\\"data\\\" textField=\\\"name\\\" kendoTreeViewExpandable kendoTreeViewFlatDataBinding idField=\\\"id\\\"\\r\\n      parentIdField=\\\"parentID\\\" kendoTreeViewSelectable [selectBy]=\\\"'id'\\\" [(selectedKeys)]=\\\"this.selectKeys\\\"\\r\\n      (selectionChange)=\\\"selectChange($event)\\\">\\r\\n    </kendo-treeview>\\r\\n  </div>\\r\\n</div>\\r\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/modules/operation/business/bizobject.component.html\n// module id = ./src/app/modules/operation/business/bizobject.component.html\n// module chunks = operation.module","import { Component, OnInit, Output, EventEmitter } from '@angular/core';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { Observable } from 'rxjs/Observable';\r\nimport { of } from 'rxjs/observable/of';\r\nimport { BizobjectService } from './domain';\r\n\r\n\r\n@Component({\r\n  selector: 'app-bizobject',\r\n  templateUrl: './bizobject.component.html',\r\n  styleUrls: ['./bizobject.component.css']\r\n})\r\nexport class BizobjectComponent implements OnInit {\r\n\r\n  public data: any[];\r\n  public selectKeys: string[] = [];\r\n  currentid: string;\r\n  @Output()\r\n  businessChanged: EventEmitter<string> = new EventEmitter<string>();\r\n\r\n  constructor (private viewmodel: BizobjectService) {\r\n  }\r\n\r\n  ngOnInit () {\r\n    this.viewmodel.getdata().subscribe((result: any) => {\r\n      console.log(result);\r\n      result.forEach(element => {\r\n        if (element.parentId === null) {\r\n          element.parentId = undefined;\r\n        }\r\n      });\r\n      this.data = result;\r\n    });\r\n  }\r\n\r\n  /**选中行改变后触发事件 */\r\n  selectChange (args: any) {\r\n    const curBusId = args.dataItem.id;\r\n    // 首次触发\r\n    if (this.selectKeys == null || this.selectKeys.length === 0) {\r\n\r\n      this.businessChanged.emit(curBusId);\r\n    } else {\r\n      // 这个事件里还不会对selectedkeys数组赋值，是上一个状态的\r\n      const lastBusId = this.selectKeys[0];\r\n      // 变化的情况下触发\r\n      if (lastBusId !== curBusId) {\r\n        this.businessChanged.emit(curBusId);\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/modules/operation/business/bizobject.component.ts","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { TreeViewModule } from '@progress/kendo-angular-treeview';\nimport { LayoutModule } from '@progress/kendo-angular-layout';\nimport { GridModule } from '@progress/kendo-angular-grid';\nimport { CommandModule, RestfulService } from '@farris/devkit';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { DOMAIN_PROVIDERS } from './domain/index';\nimport { APP_PROVIDERS, commandHandlers } from './app/index';\n\nimport { BizobjectService } from './domain/bizobject.service';\nimport { BizobjectComponent } from './bizobject.component';\n\n\n@NgModule({\n  imports: [\n    CommonModule,\n    TreeViewModule,\n    CommandModule.setup(commandHandlers, []),\n    FormsModule,\n    LayoutModule,\n    GridModule,\n    ReactiveFormsModule\n  ],\n  declarations: [\n    BizobjectComponent\n  ],\n  providers: [\n    BizobjectService,\n    DOMAIN_PROVIDERS,\n    APP_PROVIDERS,\n    commandHandlers,\n    RestfulService\n  ],\n  exports: [BizobjectComponent]\n})\nexport class BizobjectModule { }\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/modules/operation/business/bizobject.module.ts","import { Injectable, Injector } from '@angular/core';\r\nimport { MemoryStorage } from '@farris/devkit';\r\n\r\n@Injectable()\r\nexport  class BizobjectDatastorage extends MemoryStorage {\r\n  constructor() {\r\n    super();\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/modules/operation/business/domain/bizobject-datastorage.ts","import { Injectable, Injector } from '@angular/core';\r\nimport { NgRepository, Repository } from '@farris/devkit';\r\n\r\nimport { BizobjectDatastorage } from './bizobject-datastorage';\r\nimport { BizobjectEntity } from './entities/bizobject.entity';\r\n\r\n\r\n@Injectable()\r\n@NgRepository({\r\n  from: BizobjectDatastorage,\r\n  entityType: BizobjectEntity\r\n})\r\nclass BizobjectRepository extends Repository<BizobjectEntity> {\r\n  constructor(injector: Injector) {\r\n    super(injector);\r\n  }\r\n}\r\n\r\nexport { BizobjectRepository };\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/modules/operation/business/domain/bizobject-repository.ts","import { Injectable } from '@angular/core';\r\nimport { RestfulService } from '@farris/devkit';\r\nimport { BizobjectRepository } from './bizobject-repository';\r\nimport { BizobjectDatastorage } from './bizobject-datastorage';\r\nimport { SysManagerUtil } from '../../../common';\r\nimport { Observable } from 'rxjs/Observable';\r\n\r\n@Injectable()\r\nexport class BizobjectService {\r\n\r\n  constructor(\r\n    private reposity: BizobjectRepository,\r\n    private datastorage: BizobjectDatastorage,\r\n    private rest: RestfulService,\r\n    private sessionmanager: SysManagerUtil\r\n  ) { }\r\n\r\n  private url = '/api/dev/main/v1.0/business-objects';\r\n\r\n  getdata(): Observable<any> {\r\n    return this.rest.get(this.url, null, this.sessionmanager.getHeader());\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/modules/operation/business/domain/bizobject.service.ts","import { Entity, NgField, NgObject, EntityList, NgList } from '@farris/devkit';\r\n\r\nexport class BizobjectEntity extends Entity {\r\n /**\r\n * 标识\r\n */\r\n@NgField(true)\r\nid: string;\r\n\r\n/**\r\n * 编号\r\n */\r\n@NgField()\r\ncode: string;\r\n\r\n/**\r\n* 全称\r\n*/\r\n@NgField()\r\nname: string;\r\n\r\n@NgField()\r\nisDetail: boolean;\r\n\r\n@NgField()\r\nparentID: string;\r\n\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/modules/operation/business/domain/entities/bizobject.entity.ts","import { Provider } from '@angular/core';\r\nimport { BizobjectDatastorage } from './bizobject-datastorage';\r\nimport { BizobjectRepository } from './bizobject-repository';\r\nimport { BizobjectService } from './bizobject.service';\r\nimport { BizobjectEntity } from './entities/bizobject.entity';\r\n\r\n\r\nconst DOMAIN_PROVIDERS: Provider[]  = [\r\n  BizobjectDatastorage,\r\n  BizobjectRepository,\r\n  BizobjectService,\r\n];\r\n\r\nexport {\r\n  BizobjectEntity,\r\n  BizobjectDatastorage,\r\n  BizobjectRepository,\r\n  BizobjectService,\r\n  DOMAIN_PROVIDERS\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/modules/operation/business/domain/index.ts","import { Provider } from '@angular/core';\r\nimport { OperationTreeBindingdata } from './operation-tree-bingdata';\r\nimport { OperationTreeViewmodel } from './operation-tree-viewmodel';\r\nimport { OperationTreeUIState } from './operation-tree.uistate';\r\n\r\n\r\n\r\n\r\nconst OperationTreeAppProvider: Provider[] = [\r\n    OperationTreeBindingdata,\r\n    OperationTreeViewmodel,\r\n    OperationTreeUIState\r\n];\r\n\r\nexport {\r\n    OperationTreeBindingdata,\r\n    OperationTreeViewmodel,\r\n    OperationTreeAppProvider,\r\n    OperationTreeUIState\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/modules/operation/operation-tree/app/index.ts","import { Injectable, Injector } from '@angular/core';\r\nimport { NgBindingData, BindingData } from '@farris/devkit';\r\nimport { OperationEntity } from '../domain/operation.entity';\r\nimport { OperationTreeRepository } from '../domain/operation-tree-repository';\r\n\r\n\r\n@Injectable()\r\n@NgBindingData({\r\n  entity:     OperationEntity,\r\n  repository: OperationTreeRepository\r\n})\r\nexport class OperationTreeBindingdata extends BindingData {\r\n  constructor(injector: Injector) {\r\n    super(injector);\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/modules/operation/operation-tree/app/operation-tree-bingdata.ts","import { Injector, Injectable } from '@angular/core';\r\nimport { NgViewModel, ViewModel, NgCommand } from '@farris/devkit';\r\nimport { OperationTreeBindingdata } from './operation-tree-bingdata';\r\n\r\n\r\n/**\r\n * 视图模型\r\n */\r\n@Injectable()\r\n@NgViewModel({\r\n  children: [],\r\n  binding: OperationTreeBindingdata\r\n})\r\nexport class OperationTreeViewmodel extends ViewModel {\r\n\r\n  /**\r\n   * 构造函数\r\n   */\r\n  constructor(injector: Injector) {\r\n    super(injector);\r\n  }\r\n\r\n}\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/modules/operation/operation-tree/app/operation-tree-viewmodel.ts","import { Injectable } from '@angular/core';\r\n\r\n/**\r\n * 功能操作界面状态\r\n */\r\n@Injectable()\r\nexport class OperationTreeUIState {\r\n\r\n    /**\r\n     * 表单动作，默认为编辑\r\n     */\r\n    action = 'edit';\r\n    /**\r\n     * 新增时是否新增明细，默认为false\r\n     */\r\n    isAddOperationGroup = false;\r\n    /**\r\n     * 所属业务对象内码\r\n     */\r\n    curBusId: string;\r\n    /**\r\n     * 新增明细时业务操作的父节点\r\n     */\r\n    parentId: string;\r\n\r\n}\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/modules/operation/operation-tree/app/operation-tree.uistate.ts","import { OperationTreeDataStorage } from './operation-tree-datastorage';\r\nimport { Provider } from '@angular/core';\r\nimport { OperationTreeRepository } from './operation-tree-repository';\r\nimport { OperationService } from './operation.service';\r\n\r\n\r\n\r\n\r\nconst OperationTreeDomainProvider: Provider[] = [\r\n    OperationTreeDataStorage,\r\n    OperationTreeRepository,\r\n    OperationService\r\n];\r\n\r\nexport {\r\n    OperationService,\r\n    OperationTreeRepository,\r\n    OperationTreeDataStorage,\r\n    OperationTreeDomainProvider\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/modules/operation/operation-tree/domain/index.ts","import { Injectable } from '@angular/core';\r\nimport { MemoryStorage } from '@farris/devkit';\r\n\r\n@Injectable()\r\nexport class OperationTreeDataStorage extends MemoryStorage {\r\n  constructor() {\r\n    super();\r\n  }\r\n}\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/modules/operation/operation-tree/domain/operation-tree-datastorage.ts","import { Injectable, Injector } from '@angular/core';\r\nimport { NgRepository, Repository } from '@farris/devkit';\r\nimport { OperationEntity } from './operation.entity';\r\nimport { OperationTreeDataStorage } from './operation-tree-datastorage';\r\n\r\n@Injectable()\r\n@NgRepository({\r\n  from: OperationTreeDataStorage,\r\n  entityType: OperationEntity\r\n})\r\nexport class OperationTreeRepository extends Repository<OperationEntity> {\r\n  constructor(injector: Injector) {\r\n      super(injector);\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/modules/operation/operation-tree/domain/operation-tree-repository.ts","import { Entity, NgField } from '@farris/devkit';\r\n\r\n/**\r\n * 操作实体\r\n */\r\nexport class OperationEntity extends Entity {\r\n\r\n    /**\r\n     * 内码\r\n     */\r\n    @NgField(\r\n        {\r\n            primary: true\r\n        }\r\n    )\r\n    id: string;\r\n\r\n    /**\r\n     * 父节点\r\n     */\r\n    @NgField()\r\n    parentId: number;\r\n    /**\r\n     * 编号\r\n     */\r\n    @NgField()\r\n    code: string;\r\n\r\n    /**\r\n     * 业务对象内码\r\n     */\r\n    @NgField()\r\n    businessId: string;\r\n\r\n    /**\r\n     * 名称\r\n     */\r\n    @NgField()\r\n    name: string;\r\n\r\n    /**\r\n     * 描述\r\n     */\r\n    @NgField()\r\n    note: string;\r\n\r\n    /**\r\n    * 1明细或者0分组\r\n    */\r\n    @NgField()\r\n    type: number;\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/modules/operation/operation-tree/domain/operation.entity.ts","import { HttpErrorResponse } from '@angular/common/http';\r\nimport { Observable } from 'rxjs/Observable';\r\nimport { Injectable } from '@angular/core';\r\nimport { RestfulService } from '@farris/devkit';\r\nimport { SysManagerUtil } from '../../../common';\r\nimport { OperationTreeDataStorage } from './operation-tree-datastorage';\r\nimport { OperationDetailDataStorage, OperationDetailRepository } from '../operation-detail/domain';\r\nimport { OperationTreeUIState } from '../app';\r\n\r\n/**功能操作的取数服务 */\r\n@Injectable()\r\nexport class OperationService {\r\n    constructor (private rest: RestfulService,\r\n        private sysUtil: SysManagerUtil,\r\n        private opTreeStore: OperationTreeDataStorage,\r\n        private opDetailStore: OperationDetailDataStorage,\r\n        private opDetailRep: OperationDetailRepository,\r\n        private opTreeState: OperationTreeUIState\r\n    ) {\r\n    }\r\n\r\n    /**\r\n     * 新增一个业务操作,用于功能操作详情页面\r\n     */\r\n    addOperation (data: Object) {\r\n        this.opDetailStore.load([data]);\r\n    }\r\n\r\n    /**\r\n     * 删除一个业务操作\r\n     * @param deleteOpId 待删除的业务操作内码\r\n     */\r\n    deleteOperationById (deleteOpId: string): Observable<any> {\r\n        const headers = this.sysUtil.getHeader();\r\n        const operationUrl = this.sysUtil.operationWebApi + '/' + deleteOpId;\r\n        return this.rest.delete(operationUrl, null, headers);\r\n\r\n    }\r\n\r\n    /**\r\n     * 保存一个业务操作\r\n     */\r\n    saveOperation (): Observable<any> {\r\n        const curOp = this.opDetailRep.getAllEntities()[0];\r\n        console.log(curOp.data);\r\n        const headers = this.sysUtil.getHeader();\r\n        const operationUrl = this.sysUtil.operationWebApi;\r\n        // 新增\r\n        if (this.opTreeState.action === 'add') {\r\n            return this.rest.post(operationUrl, curOp.data, null, headers);\r\n        }\r\n        // 编辑\r\n        if (this.opTreeState.action === 'edit') {\r\n            return this.rest.put(operationUrl, curOp.data, null, headers);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 根据功能操作内码获取完整的功能操作实体\r\n     * @param operationId 功能操作的内码\r\n     */\r\n    getOperationById (operationId: string) {\r\n        const headers = this.sysUtil.getHeader();\r\n        const operationUrl = this.sysUtil.operationWebApi + '/' + operationId;\r\n        this.rest.get(operationUrl, null, headers)\r\n            // 编辑时需要提供farrisId字段\r\n            .map(item => {\r\n                item['farrisId'] = this.sysUtil.getGuid36();\r\n                return item;\r\n            })\r\n            .subscribe(\r\n            result => {\r\n                console.log(result);\r\n                    this.opDetailStore.load([result]); },\r\n                (error: HttpErrorResponse) => {\r\n                    alert(error.error.Message);\r\n                    console.log(error);\r\n                }\r\n            );\r\n    }\r\n\r\n    /**\r\n     * 根据业务对象获取相应的业务操作列表\r\n     * @param busId 业务对象内码\r\n     */\r\n    getOperationsByBusId (busId: string) {\r\n        // 先清空\r\n        this.opTreeStore.clear();\r\n        const operationUrl = this.sysUtil.operationWebApi + '/business/' + busId;\r\n        const headers = this.sysUtil.getHeader();\r\n        this.rest.get(operationUrl, null, headers).map(\r\n            result => {\r\n                const operationList = result.map(item => {\r\n                    if (item.parentId === null || item.parentId === '') {\r\n                        item.parentId = undefined;\r\n                    }\r\n                    return item;\r\n                });\r\n                return operationList;\r\n            }\r\n        ).subscribe(result => {\r\n            this.opTreeStore.load(result);\r\n        },\r\n        (error: HttpErrorResponse) => {\r\n                alert(error.error.Message);\r\n                console.log(error);\r\n            });\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/modules/operation/operation-tree/domain/operation.service.ts","import { Provider } from '@angular/core';\r\nimport { OperationDetailViewmodel } from './operation-detail-viewmodel';\r\nimport { OperationDetailBindingdata } from './operation-detail-bingdata';\r\nimport { OperationDetailForm } from './operation-detail.form';\r\n\r\nconst OperationDetailAppProvider: Provider[] = [\r\n    OperationDetailBindingdata,\r\n    OperationDetailForm,\r\n    OperationDetailViewmodel,\r\n];\r\n\r\nexport {\r\n    OperationDetailBindingdata,\r\n    OperationDetailViewmodel,\r\n    OperationDetailForm,\r\n    OperationDetailAppProvider\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/modules/operation/operation-tree/operation-detail/app/index.ts","import { Injectable, Injector } from '@angular/core';\r\nimport { NgBindingData, BindingData } from '@farris/devkit';\r\nimport { OperationDetailRepository } from '../domain/operation-detail-repository';\r\nimport { OperationDetailEntity } from '../domain/operation-detail.entity';\r\n\r\n\r\n@Injectable()\r\n@NgBindingData({\r\n  entity:     OperationDetailEntity,\r\n  repository: OperationDetailRepository\r\n})\r\nexport class OperationDetailBindingdata extends BindingData {\r\n  constructor(injector: Injector) {\r\n    super(injector);\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/modules/operation/operation-tree/operation-detail/app/operation-detail-bingdata.ts","import { Injector, Injectable } from '@angular/core';\r\nimport { NgViewModel, ViewModel, NgCommand } from '@farris/devkit';\r\nimport { OperationDetailBindingdata } from './operation-detail-bingdata';\r\nimport { OperationDetailForm } from './operation-detail.form';\r\n\r\n\r\n\r\n/**\r\n * 视图模型\r\n */\r\n@Injectable()\r\n@NgViewModel({\r\n  children: [],\r\n    binding: OperationDetailBindingdata,\r\n  form: OperationDetailForm\r\n})\r\nexport class OperationDetailViewmodel extends ViewModel {\r\n\r\n  /**\r\n   * 构造函数\r\n   */\r\n  constructor(injector: Injector) {\r\n    super(injector);\r\n  }\r\n}\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/modules/operation/operation-tree/operation-detail/app/operation-detail-viewmodel.ts","import { Injectable, Injector } from '@angular/core';\r\nimport { FormControl } from '@angular/forms';\r\nimport { NgForm, Form, NgFormControl} from '@farris/devkit';\r\nimport { OperationDetailBindingdata } from './operation-detail-bingdata';\r\n\r\n\r\n/**\r\n * 功能操作详情表单\r\n */\r\n@Injectable()\r\n@NgForm({\r\n    bindingData: OperationDetailBindingdata\r\n})\r\nexport class OperationDetailForm extends Form {\r\n\r\n    constructor (injector: Injector) {\r\n        super(injector);\r\n    }\r\n    /**\r\n   * 编号\r\n   */\r\n    @NgFormControl({\r\n        name: 'id',\r\n        binding: 'id'\r\n    })\r\n    id: FormControl;\r\n\r\n    /**\r\n     * 编号\r\n     */\r\n    @NgFormControl({\r\n        name: 'code',\r\n        binding: 'code'\r\n    })\r\n    code: FormControl;\r\n\r\n    /**\r\n     * 名称\r\n     */\r\n    @NgFormControl({\r\n        name: 'name',\r\n        binding: 'name'\r\n    })\r\n    name: FormControl;\r\n\r\n    /**\r\n     * 描述\r\n     */\r\n    @NgFormControl({\r\n        name: 'note',\r\n        binding: 'note'\r\n    })\r\n    note: FormControl;\r\n\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/modules/operation/operation-tree/operation-detail/app/operation-detail.form.ts","import { OperationDetailDataStorage } from './operation-detail-datastorage';\r\nimport { Provider } from '@angular/core';\r\nimport { OperationDetailRepository } from './operation-detail-repository';\r\nimport { OperationDetailEntity } from './operation-detail.entity';\r\n\r\nconst OperationDetailDomainProvider: Provider[] = [\r\n    OperationDetailDataStorage,\r\n    OperationDetailRepository,\r\n\r\n];\r\n\r\nexport {\r\n    OperationDetailEntity,\r\n    OperationDetailRepository,\r\n    OperationDetailDataStorage,\r\n    OperationDetailDomainProvider\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/modules/operation/operation-tree/operation-detail/domain/index.ts","import { Injectable } from '@angular/core';\r\nimport { MemoryStorage } from '@farris/devkit';\r\n\r\n@Injectable()\r\nexport class OperationDetailDataStorage extends MemoryStorage {\r\n  constructor() {\r\n    super();\r\n  }\r\n}\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/modules/operation/operation-tree/operation-detail/domain/operation-detail-datastorage.ts","import { Injectable, Injector } from '@angular/core';\r\nimport { NgRepository, Repository } from '@farris/devkit';\r\nimport { OperationDetailDataStorage } from './operation-detail-datastorage';\r\nimport { OperationDetailEntity } from './operation-detail.entity';\r\n\r\n\r\n@Injectable()\r\n@NgRepository({\r\n  from: OperationDetailDataStorage,\r\n  entityType: OperationDetailEntity\r\n})\r\nexport class OperationDetailRepository extends Repository<OperationDetailEntity> {\r\n  constructor(injector: Injector) {\r\n      super(injector);\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/modules/operation/operation-tree/operation-detail/domain/operation-detail-repository.ts","import { Entity, NgField } from '@farris/devkit';\r\n\r\n/**\r\n * 操作实体\r\n */\r\nexport class OperationDetailEntity extends Entity {\r\n\r\n    /**Farris实体的内码，不允许修改 */\r\n\r\n    @NgField( {\r\n        primary: true\r\n    }\r\n    )\r\n    farrisId: string;\r\n    /**\r\n     * 内码\r\n     */\r\n    @NgField()\r\n    id: string;\r\n\r\n    /**\r\n     * 父节点\r\n     */\r\n    @NgField()\r\n    parentId: number;\r\n    /**\r\n     * 编号\r\n     */\r\n    @NgField()\r\n    code: string;\r\n\r\n    /**\r\n     * 业务对象内码\r\n     */\r\n    @NgField()\r\n    businessId: string;\r\n\r\n    /**\r\n     * 名称\r\n     */\r\n    @NgField()\r\n    name: string;\r\n\r\n    /**\r\n     * 描述\r\n     */\r\n    @NgField()\r\n    note: string;\r\n\r\n    /**\r\n    * 1明细或者0分组\r\n    */\r\n    @NgField()\r\n    type: number;\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/modules/operation/operation-tree/operation-detail/domain/operation-detail.entity.ts","import { SysManagerUtil } from './../../../common/util/sys-manager-util';\nimport { Component, OnInit, Input, OnChanges,  SimpleChanges } from '@angular/core';\nimport { OperationDetailViewmodel } from './app/operation-detail-viewmodel';\nimport { OperationService } from '../domain';\nimport { OperationTreeUIState } from '../app';\n\n@Component({\n  selector: 'app-operation-detail',\n  templateUrl: './operation-detail.component.html',\n  styleUrls: ['./operation-detail.component.css']\n})\nexport class OperationDetailComponent implements OnInit, OnChanges {\n\n  @Input()\n  operationId: string;\n  public selectKeys: string[] = [];\n  public operationTreeList: any[];\n  public canEditId = false;\n  constructor (\n    public opDetailVm: OperationDetailViewmodel,\n    private opService: OperationService,\n    private opTreeState: OperationTreeUIState,\n    private sysUtil: SysManagerUtil\n  ) { }\n\n  ngOnInit () {\n  }\n  ngOnChanges (changes: SimpleChanges): void {\n    // 加载数据\n    if (changes['operationId']) {\n      // 新增的，区分明细和分组\n      if (this.opTreeState.action === 'add') {\n        const op = {\n          // Farris UI的主键策略\n          farrisId: this.sysUtil.getGuid36(),\n          id: this.operationId,\n          businessId: this.opTreeState.curBusId\n        };\n        // 新增时允许修改内码\n        this.canEditId = true;\n        if (this.opTreeState.isAddOperationGroup) {\n          op['type'] = 0;\n        } else {\n          op['type'] = 1;\n          op['parentId'] = this.opTreeState.parentId;\n\n        }\n        this.opService.addOperation(op);\n      }\n      // 编辑\n      if (this.opTreeState.action === 'edit') {\n        this.canEditId = false;\n        this.opService.getOperationById(this.operationId);\n      }\n    }\n  }\n  /** */\n  addOpGroup () { }\n  addOpDetail () { }\n  deleteOpDetail (opId: string) { }\n  modifyOpDetail (operation: any) { }\n  getOperationById (opId: string) { }\n  whenSelect () { }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/modules/operation/operation-tree/operation-detail/operation-datail.component.ts","module.exports = \"\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/modules/operation/operation-tree/operation-detail/operation-detail.component.css\n// module id = ./src/app/modules/operation/operation-tree/operation-detail/operation-detail.component.css\n// module chunks = operation.module","module.exports = \"<form class=\\\"k-form p-2\\\" [formGroup]=\\\"opDetailVm.form\\\">\\r\\n  <div class=\\\"row\\\">\\r\\n    <div class=\\\"col-sm-12 col-md-6 pb-1\\\">\\r\\n        <label class=\\\"k-form-field\\\">\\r\\n            <span>标识 </span>\\r\\n            <div class=\\\"d-flex\\\">\\r\\n              <input formControlName=\\\"id\\\"  class=\\\"k-textbox w-100\\\" [readOnly]=\\\"!this.canEditId\\\"/>\\r\\n            </div>\\r\\n          </label>\\r\\n      <label class=\\\"k-form-field\\\">\\r\\n        <span>编号 </span>\\r\\n        <div class=\\\"d-flex\\\">\\r\\n          <input formControlName=\\\"code\\\" class=\\\"k-textbox w-100\\\" />\\r\\n        </div>\\r\\n      </label>\\r\\n      <label class=\\\"k-form-field\\\">\\r\\n          <span>名称 </span>\\r\\n          <div class=\\\"d-flex\\\">\\r\\n            <input formControlName=\\\"name\\\" class=\\\"k-textbox py-1 px-2 w-100\\\" />\\r\\n          </div>\\r\\n        </label>\\r\\n        <label class=\\\"k-form-field\\\">\\r\\n          <span>描述 </span>\\r\\n          <div class=\\\"d-flex\\\">\\r\\n          <textarea kendoTextArea formControlName=\\\"note\\\" rows=\\\"2\\\" class=\\\"k-textarea w-100\\\"></textarea>\\r\\n          </div>\\r\\n        </label>\\r\\n    </div>\\r\\n    </div>\\r\\n</form>\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/modules/operation/operation-tree/operation-detail/operation-detail.component.html\n// module id = ./src/app/modules/operation/operation-tree/operation-detail/operation-detail.component.html\n// module chunks = operation.module","module.exports = \"\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/modules/operation/operation-tree/operation-tree.component.css\n// module id = ./src/app/modules/operation/operation-tree/operation-tree.component.css\n// module chunks = operation.module","module.exports = \"<div class=\\\"d-flex flex-column g-main pt-2 mb-2 mr-2\\\">\\r\\n  <div class=\\\"clearfix\\\">\\r\\n    <h1 class=\\\"h4 d-inline-block\\\">功能操作</h1>\\r\\n    <div class=\\\"float-right\\\">\\r\\n      <button class=\\\"btn btn-sm btn-default\\\" (click)=\\\"addOpGroup()\\\">新增功能分组</button>\\r\\n      <button class=\\\"btn btn-sm btn-default\\\" (click)=\\\"addOpDetail()\\\">新增功能操作</button>\\r\\n      <button class=\\\"btn btn-sm btn-default\\\" (click)=\\\"deleteOpDetail()\\\">删除</button>\\r\\n      <button class=\\\"btn btn-sm btn-default\\\" (click)=\\\"saveOpDetail()\\\">保存</button>\\r\\n    </div>\\r\\n  </div>\\r\\n  <div class=\\\"flex-auto d-flex\\\">\\r\\n    <kendo-splitter orientation=\\\"vertical\\\">\\r\\n      <kendo-splitter-pane style=\\\"height: 40%;\\\">\\r\\n          <kendo-treeview [nodes]=\\\"this.operationTreeList\\\" textField=\\\"name\\\" idField=\\\"id\\\" parentIdField=\\\"parentId\\\"\\r\\n            kendoTreeViewExpandable kendoTreeViewFlatDataBinding kendoTreeViewSelectable [selectBy]=\\\"'id'\\\"\\r\\n            [expandBy]=\\\"'id'\\\"\\r\\n            [expandedKeys]=\\\"expandKeys\\\"\\r\\n            \\r\\n            [(selectedKeys)]=\\\"selectKeys\\\" (selectionChange)=\\\"selectOpChanged($event)\\\">\\r\\n          </kendo-treeview>\\r\\n      </kendo-splitter-pane>\\r\\n      <kendo-splitter-pane style=\\\"height: 60%;\\\">\\r\\n        <div *ngIf=\\\"isOperationSelected\\\">\\r\\n          <app-operation-detail [operationId]=\\\"this.curSelectedOpId\\\"></app-operation-detail>\\r\\n        </div>\\r\\n      </kendo-splitter-pane>\\r\\n    </kendo-splitter>\\r\\n  </div>\\r\\n</div>\\r\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/modules/operation/operation-tree/operation-tree.component.html\n// module id = ./src/app/modules/operation/operation-tree/operation-tree.component.html\n// module chunks = operation.module","import { HttpErrorResponse } from '@angular/common/http';\nimport { Component, OnInit, ViewChild } from '@angular/core';\nimport { OperationTreeViewmodel } from './app/operation-tree-viewmodel';\nimport { OperationService } from './domain';\nimport { SysManagerUtil } from '../../common';\nimport { OperationTreeUIState } from './app';\nimport { OperationDetailComponent } from './operation-detail/operation-datail.component';\n\n@Component({\n  selector: 'app-operation-tree',\n  templateUrl: './operation-tree.component.html',\n  styleUrls: ['./operation-tree.component.css']\n})\nexport class OperationTreeComponent implements OnInit {\n\n  // 子组件详情\n  @ViewChild(OperationDetailComponent)\n  opDetailCom: OperationDetailComponent;\n  isOperationSelected = false;\n  public selectKeys: string[] = [];\n  public expandKeys: string[] = [];\n  public operationTreeList: any[];\n  private curBusId: string;\n  public curSelectedOpId: string;\n\n\n  constructor (\n    public opTreeVm: OperationTreeViewmodel,\n    public opService: OperationService,\n    private sysUtil: SysManagerUtil,\n    private opTreeState: OperationTreeUIState\n  ) { }\n\n  ngOnInit () {\n    this.expandKeys = [];\n  }\n\n  /**\n   * 新增分组信息\n   */\n  addOpGroup () {\n    if (!this.curBusId) {\n      alert('新增功能分组时需要请选择隶属的业务对象！');\n      return;\n    }\n    // 新增的时候加载详情页面,务必初始化为new\n    this.isOperationSelected = true;\n    // getGuid36（）仅仅为了触发进入详情页面,加载详情页面的时候主要是按照UI对象处理逻辑\n    this.opTreeState.action = 'add';\n    this.opTreeState.isAddOperationGroup = true;\n    this.opTreeState.curBusId = this.curBusId;\n    this.curSelectedOpId = this.sysUtil.getGuid36();\n  }\n\n  /**\n   * 新增明细信息\n   */\n  addOpDetail () {\n\n    // 业务对象下是否有数据\n    if (this.operationTreeList == null || this.operationTreeList.length === 0) {\n      alert('当前业务对象下没有功能分组，请先新增功能分组！');\n      return;\n    }\n    // 是否选中了相应的业务操作数据\n    if (this.selectKeys === null || this.selectKeys.length === 0) {\n      alert('请选择需要新增功能操作的功能分组！');\n      return;\n    }\n    // 选中的是否为功能分组信息\n    const curOpId = this.selectKeys[0];\n    const curOpEntity = this.opTreeVm.bindingData.list.findById(curOpId);\n    if (curOpEntity['type'] === 1) {\n      alert('功能操作下不允许添加功能操作！');\n      return;\n    }\n    this.isOperationSelected = true;\n    // getGuid36（）仅仅为了触发进入详情页面,加载详情页面的时候主要是按照UI对象处理逻辑\n    this.opTreeState.action = 'add';\n    this.opTreeState.isAddOperationGroup = false;\n    this.opTreeState.curBusId = this.curBusId;\n    this.opTreeState.parentId = curOpId;\n    this.curSelectedOpId = this.sysUtil.getGuid36();\n  }\n\n  deleteOpDetail () {\n    if (this.selectKeys === null || this.selectKeys.length === 0) {\n      alert('请选择需要删除的功能操作！');\n      return;\n    }\n    const curOpId = this.selectKeys[0];\n    const curOpEntity = this.opTreeVm.bindingData.list.findById(curOpId);\n    // 如果不含有下级，应该可删，需要判断是否有下级\n    if (curOpEntity['type'] === 0) {\n      const hasChildren = this.opTreeVm.bindingData.list.toJSON().find(item => item.parentId === curOpId);\n      if (hasChildren) {\n        alert('功能分组下有操作信息不允许删除!');\n        return;\n      }\n    }\n    this.opService.deleteOperationById(curOpId).subscribe(\n      result => {\n          // 删除成功后刷新主界面,删除后定位问题\n        this.opService.getOperationsByBusId(this.curBusId);\n        // 把详情页面关闭\n        this.isOperationSelected = false;\n      },\n      error => {\n          console.log(error);\n          console.log('删除业务操作时出错');\n      }\n  );\n  }\n\n  /**保存一个业务操作 */\n  saveOpDetail () {\n    // 未加载无需保存\n    if (!this.opDetailCom) {\n      return;\n    }\n    this.opService.saveOperation()\n      .subscribe(\n      result => {\n        console.log(result);\n        // 新增或者编辑成功后刷新主界面\n        this.opService.getOperationsByBusId(this.curBusId);\n        // 新增的时候，选择内码导航\n        if (this.opTreeState.action === 'add') {\n          const newOpId = result['id'];\n          const parentId = result['parentId'];\n          this.selectKeys = [newOpId];\n          if (parentId && parentId !== '') {\n            if (this.expandKeys.includes(parentId) === false) {\n              this.expandKeys.push(parentId);\n            }\n          }\n        }\n        // 进入编辑状态，且不可编辑内码\n        this.opDetailCom.canEditId = false;\n        this.opTreeState.action = 'edit';\n        alert('保存成功');\n      },\n      (error: HttpErrorResponse) => {\n        alert(error.error.Message);\n        console.log(error);\n      }\n      );\n  }\n\n  /**\n   * 业务操作选择变化后\n   * @param args 业务操作参数\n   */\n  selectOpChanged (args: any) {\n    // 先打开详情页面\n    this.isOperationSelected = true;\n    const curOpId = args.dataItem.id;\n    let isEmitDetail = false;\n    // 首次触发\n    if (this.selectKeys == null || this.selectKeys.length === 0) {\n      // 触发详情页重新获取数据\n      isEmitDetail = true;\n    } else {\n      // 这个事件里还不会对selectedkeys数组赋值，是上一个状态的\n      const lastOpId = this.selectKeys[0];\n      // 变化的情况下触发\n      if (curOpId !== lastOpId) {\n        isEmitDetail = true;\n      }\n    }\n    // 需要触发详情页面\n    if (isEmitDetail) {\n      // 进入编辑\n      this.opTreeState.action = 'edit';\n      this.curSelectedOpId = curOpId;\n    }\n  }\n\n\n  /**\n   * 当外界业务对象改变后，需要加载指定的业务操作列表\n   * @param busId 业务对象内码\n   */\n  loadOperationsByBusId (busId: string) {\n    // 属性赋值\n    this.curBusId = busId;\n    // 状态清空\n    this.isOperationSelected = false;\n    this.selectKeys = [];\n    // 这个地方会load递增，但是界面上的数据不会多次刷新\n    this.opTreeVm.bindingData.changes.filter(item => item.type === 'Load').subscribe(\n      result => {\n        this.operationTreeList = this.opTreeVm.bindingData.list.toJSON();\n      }\n    );\n    this.opService.getOperationsByBusId(busId);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/modules/operation/operation-tree/operation-tree.component.ts","module.exports = \"\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/modules/operation/operation.component.css\n// module id = ./src/app/modules/operation/operation.component.css\n// module chunks = operation.module","module.exports = \"<div class=\\\"d-flex g-main\\\">\\r\\n      <div class=\\\"col-4\\\">\\r\\n        <app-bizobject (businessChanged)=\\\"whenBusChanged($event)\\\"></app-bizobject>\\r\\n      </div>\\r\\n    <div class=\\\"col-8\\\">\\r\\n      <app-operation-tree></app-operation-tree>\\r\\n    </div>\\r\\n  </div>\\r\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/modules/operation/operation.component.html\n// module id = ./src/app/modules/operation/operation.component.html\n// module chunks = operation.module","import { Component, OnInit, ViewChild } from '@angular/core';\nimport { OperationTreeComponent } from './operation-tree/operation-tree.component';\n\n@Component({\n  selector: 'app-operation',\n  templateUrl: './operation.component.html',\n  styleUrls: ['./operation.component.css']\n})\nexport class OperationComponent implements OnInit {\n\n  @ViewChild(OperationTreeComponent)\n  private operationTree: OperationTreeComponent;\n  constructor (\n  ) { }\n\n  ngOnInit() {\n  }\n\n  whenBusChanged (busId: string) {\n    this.operationTree.loadOperationsByBusId(busId);\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/modules/operation/operation.component.ts","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nimport { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { GridModule } from '@progress/kendo-angular-grid';\r\nimport { TreeViewModule } from '@progress/kendo-angular-treeview';\r\nimport { RestfulService } from '@farris/devkit';\r\nimport { SysManagerUtil } from '../common';\r\nimport { OperationComponent } from './operation.component';\r\nimport { OperationTreeComponent } from './operation-tree/operation-tree.component';\r\nimport { OperationRoutingModule } from './operation.router.module';\r\nimport { BizobjectModule } from './business/bizobject.module';\r\nimport { OperationTreeDomainProvider } from './operation-tree/domain';\r\nimport { OperationTreeAppProvider } from './operation-tree/app';\r\nimport { OperationDetailComponent } from './operation-tree/operation-detail/operation-datail.component';\r\nimport { OperationDetailDomainProvider } from './operation-tree/operation-detail/domain';\r\nimport { OperationDetailAppProvider } from './operation-tree/operation-detail/app';\r\nimport { LayoutModule } from '@progress/kendo-angular-layout';\r\nvar GSPOperationModule = /** @class */ (function () {\r\n    function GSPOperationModule() {\r\n    }\r\n    GSPOperationModule.prototype.constrctor = function () {\r\n    };\r\n    GSPOperationModule = __decorate([\r\n        NgModule({\r\n            declarations: [\r\n                OperationComponent,\r\n                OperationTreeComponent,\r\n                OperationDetailComponent\r\n            ],\r\n            imports: [\r\n                CommonModule,\r\n                FormsModule,\r\n                ReactiveFormsModule,\r\n                GridModule,\r\n                TreeViewModule,\r\n                LayoutModule,\r\n                OperationRoutingModule,\r\n                BizobjectModule\r\n            ],\r\n            providers: [\r\n                RestfulService,\r\n                SysManagerUtil,\r\n                OperationTreeDomainProvider,\r\n                OperationTreeAppProvider,\r\n                OperationDetailDomainProvider,\r\n                OperationDetailAppProvider,\r\n            ]\r\n        })\r\n    ], GSPOperationModule);\r\n    return GSPOperationModule;\r\n}());\r\nexport { GSPOperationModule };\r\n//# sourceMappingURL=operation.module.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/modules/operation/operation.module.js\n// module id = ./src/app/modules/operation/operation.module.js\n// module chunks = operation.module","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\nimport { OperationComponent } from './operation.component';\r\n\r\n\r\n\r\nconst routes: Routes = [\r\n  { path: 'operations', component: OperationComponent },\r\n  { path: '', redirectTo: 'operations', pathMatch: 'full' },\r\n  { path: '**', redirectTo: 'operations' }\r\n];\r\n\r\nexport const OperationRoutingModule = RouterModule.forChild(routes);\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/modules/operation/operation.router.module.ts"],"sourceRoot":"webpack:///"}